# photoSelector 操作説明書

photoSelectorは、大量の写真を効率的に整理・分類するためのmacOSアプリケーションです。

## 目次

- [基本的な使い方](#基本的な使い方)
- [画面の構成](#画面の構成)
- [キーボード操作](#キーボード操作)
- [写真の分類方法](#写真の分類方法)
- [設定の保存](#設定の保存)

## 基本的な使い方

### 1. フォルダを開く

1. 左上の「Open Folder」ボタンをクリック
2. 整理したい写真が入っているフォルダを選択
3. 対応している画像形式: JPG, PNG, HEIC, GIF, TIFF

### 2. 写真を分類する

写真は3つの状態に分類できます：

- **未分類**（枠なし）
- **採択**（緑の枠）
- **ボツ**（赤の枠）

#### 分類方法

- クリックは「選択」のみを行います（クリックで状態は切り替わりません）。
- 右クリックでコンテキストメニューを表示し、「採用にする」「没にする」「未分類に戻す」を実行できます。
- 未選択のセル上で右クリックした場合は、先にそのセルを選択してからメニューが表示されます。
- 複数選択に対応：
  - ⌘クリックで個別に追加/解除
  - ⇧クリックで同一ペイン内を範囲選択

**キーボードで操作:**
- 矢印キーで（アクティブなペイン内の）選択を移動
- スペースキーで主選択の状態をトグル（未分類→採択→没→未分類）

### 3. ボツ写真を移動する

1. 右上の「Move Discarded (没)」ボタンをクリック
2. 移動先は「現在のフォルダと同じ階層にある『<現在のフォルダ名>_没』フォルダ」です。
   - サンドボックス等の理由で作成できない場合は、フォールバックとして「現在のフォルダ/没」を使用します。
3. 移動した写真はリアルタイムで一覧から削除されます

## 画面の構成

メインウィンドウは 3 ペイン構成です：

- 左：フォルダツリー（選択したフォルダを読み込み）
- 中央：写真グリッド（現在フォルダの写真一覧）
- 右：プレビュー（上）と 採用/没 リスト（下、左右分割）

補足：
- 現在アクティブなペインが淡くハイライトされ、キーボード操作や ⌘A はそのペインに対して実行されます。
- 中央・採用・没 の各グリッドは、選択が画面外になった場合に自動スクロールします。

### ツールバー / メニュー

- **Open Folder**: フォルダを開く
- **サムネイルサイズスライダー**: 写真の表示サイズを変更（100〜400px）
- **Clear**: すべての分類をリセット
- **写真数表示**: 現在読み込んでいる写真の枚数
- **Move Discarded**: ボツ写真を移動（移動先ポリシーは上記参照）
- メニューバーの「仕分け」からも同じ操作（採用/没/未分類・全選択⌘A）が可能。操作対象はアクティブなペインです。

## キーボード操作

### 選択と移動（アクティブなペイン）

| キー | 動作 |
|------|------|
| ↑ / ↓ / ← / → | 選択を移動 |
| ⌘A | そのペインの全選択 |

### 写真の操作

| キー | 動作 |
|------|------|
| スペース | 主選択の状態を切り替え（未分類→採択→没→未分類） |
| Enter | 拡大表示を開く |

### 拡大表示中の操作

| キー | 動作 |
|------|------|
| Enter | 拡大表示を閉じる |
| ⌘W | 拡大表示を閉じる |
| ダブルタップ | ズームと位置をリセット |
| ピンチ操作 | 拡大・縮小 |
| 2本指ドラッグ | 画像の移動（パン） |

## 写真の分類方法

### おすすめのワークフロー

1. **フォルダを開く**
   - 整理したい写真フォルダを選択

2. **ざっと見て分類**
   - 矢印キーで次々と写真を確認
   - スペースキーで瞬時に採択/ボツを判断
   - 迷ったら未分類のまま飛ばす

3. **プレビューで確認**
   - 右側のプレビューで大きく確認
   - Enterキーでさらに大きく表示可能

4. **最終確認**
   - 右下のボツリストで移動する写真を確認

5. **移動実行**
   - 「Move Discarded (没)」ボタンで移動

6. **未分類を再確認**
   - 残った未分類の写真を再度確認

## レイアウトのカスタマイズ

### 分割線の調整

アプリ内の3つの境界線はすべてドラッグして調整できます：

1. **左右の分割線**
   - 写真一覧とプレビュー/ボツリストの幅を調整

2. **上下の分割線（右側）**
   - プレビューとボツリストの高さを調整

3. **サムネイルサイズ**
   - スライダーで写真のサイズを変更

### 拡大表示ウィンドウ

- ウィンドウの角をドラッグしてサイズ変更可能
- 画像は自動的にウィンドウサイズに合わせて表示されます

## 設定の保存

以下の設定は自動的に保存され、次回起動時に復元されます：

- すべての分割位置（メイン左右、右側上下、採用/没の境界）
- サムネイルサイズ（スライダーの位置）
- 拡大表示ウィンドウのサイズ

設定を変更するだけで、自動的に保存されます。

## Tips

### 効率的な分類のコツ

1. **キーボード操作を活用**
   - マウスを使わず、矢印キーとスペースキーだけで高速に分類できます

2. **自動スクロール**
   - 矢印キーで選択を移動すると、自動的にスクロールして選択中の写真が見えるようにします

3. **サムネイルサイズの調整**
   - 細かく確認したいときは大きく
   - 大量の写真を一度に見たいときは小さく

4. **プレビューの活用**
   - 右側のプレビューで常に選択中の写真を確認できます
   - Enterキーで拡大表示を開く/閉じる（トグル動作）

5. **段階的な分類**
   - 1回目: 明らかなボツだけを分類
   - 2回目: 採択を選ぶ
   - 3回目: 残った未分類を最終判断

## トラブルシューティング

### 写真が表示されない

- 対応している画像形式か確認してください（JPG, PNG, HEIC, GIF, TIFF）
- フォルダの読み取り権限を確認してください

### キーボードが反応しない

- 写真一覧エリアをクリックしてフォーカスを当ててください

### アプリが複数起動してしまう

- このアプリは単一インスタンス設計です
- 既に起動している場合、2回目の起動は既存のウィンドウをアクティブにします

## システム要件

- macOS 26.1以降
- 対応画像形式: JPG, JPEG, PNG, HEIC, GIF, TIFF

## プライバシーとセキュリティ

- このアプリは選択したフォルダにのみアクセスします
- ネットワーク接続は一切行いません
- 写真データは外部に送信されません
- すべての処理はローカルで完結します

---

ご質問や問題がある場合は、GitHubリポジトリのIssuesセクションでお知らせください。
